import{m as g,a as P,_ as x,r as d,o as u,c as f,b as t,d as l,w as h,F as k,j as C,k as V,h as L,t as i,f as m,i as S,q as D,v as T,g as q}from"./index-mK48P60-.js";import{c as w}from"./cartStore-BO1wKnho.js";import{p as v}from"./productStore-hCciEwjO.js";import{S as R,a as A,A as B,N as E,P as N}from"./pagination-mztTfl2Z.js";import"./sweetalert2.all-qNhIK2og.js";const U={components:{Swiper:R,SwiperSlide:A},data(){return{related:[],modules:[B,E,N]}},props:{product:{type:Object}},computed:{...g(v,["allProducts"]),filteredItems(){return this.allProducts.filter(s=>s.id!==this.product.id&&s.category===this.product.category)}},methods:{...P(v,["getAllProducts"]),getDetail(s){this.$emit("update",s),window.scrollTo({top:0,behavior:"smooth"})}},mounted(){this.getAllProducts()}},$={class:"iproducts"},I={class:"container"},Q={class:"swiper-wrapper"},O=["onClick"],j={class:"item_cont-image"},M=["src"],F={class:"item_cont-text"},H={class:"tibox"},G=t("div",{class:"custom-pagination"},null,-1);function z(s,o,r,a,e,c){const b=d("swiper-slide"),p=d("swiper");return u(),f("div",$,[t("div",I,[t("div",Q,[l(p,{ref:"relateSwiper",modules:e.modules,slidesPerGroup:1,slidesPerView:2,spaceBetween:20,loop:!1,autoplay:{delay:6e3,disableOnInteraction:!1},pagination:{el:".custom-pagination",clickable:!0},breakpoints:{768:{slidesPerView:3,spaceBetween:30},992:{slidesPerView:4,spaceBetween:50}}},{default:h(()=>[(u(!0),f(k,null,C(c.filteredItems,n=>(u(),V(b,{key:n.id},{default:h(()=>[t("a",{href:"#",onClick:L(y=>c.getDetail(n.id),["prevent"]),class:"item_cont"},[t("div",j,[t("img",{src:n.imageUrl,alt:"圖片"},null,8,M)]),t("div",F,[t("div",H,i(n.title),1),m(" $"+i(n.price),1)])],8,O)]),_:2},1024))),128))]),_:1},8,["modules","pagination"])]),G])])}const J=x(U,[["render",z]]);var K={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"dorayu",BASE_URL:"/vite-deploy-week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:W,VITE_PATH:X}=K,Y={components:{RelateProducts:J},data(){return{product:{},qty:1,isLoading:!1}},computed:{...g(v,["products"]),...g(w,["cartList","status"])},methods:{...P(w,["addCart"]),getDetailProduct(s){const o=`${W}/api/${X}/product/${s}`;this.isLoading=!0,this.axios.get(o).then(r=>{const{product:a}=r.data;this.isLoading=!1,this.product=a}).catch(r=>{S.error(r.response.data.message)}).finally(()=>{this.isLoading=!1})},updateQty(s,o=1){const a=o;s==="decrement"?this.qty>1&&(this.qty-=1):s==="increment"&&this.qty<a&&(this.qty+=1)}},created(){const{id:s}=this.$route.params;this.getDetailProduct(s)}},Z={class:"container g-wrapper"},tt={class:"row justify-content-center"},et={class:"col-lg-10"},st={"aria-label":"breadcrumb"},ot={class:"breadcrumb bg-white"},it={class:"breadcrumb-item"},nt={class:"breadcrumb-item"},rt={class:"breadcrumb-item active text-brown","aria-current":"page"},ct={class:"row my-5"},dt={class:"col-lg-5"},at={class:"procard__detail"},lt={class:"procard__detail-image"},ut=["src"],pt={class:"col-lg-6 offset-lg-1"},_t={class:"badge rounded-pill bg-primary mb-3"},mt={class:"font-weight-bold text-brown"},ht={class:"lh-base"},bt={class:"d-flex flex-column align-items-end mb-4"},gt={class:"mb-0 text-muted text-right"},ft={class:"mb-0 h5 font-weight-bold text-right"},vt={class:"d-flex"},yt={class:"w-50 me-3"},wt={class:"btn-group border qty-counter"},Pt=["disabled"],xt=t("hr",null,null,-1),kt=t("h5",{class:"font-weight-bold mt-4"},"相關商品",-1);function Vt(s,o,r,a,e,c){const b=d("VueLoading"),p=d("RouterLink"),n=d("font-awesome-icon"),y=d("RelateProducts");return u(),f(k,null,[l(b,{active:e.isLoading},null,8,["active"]),t("div",Z,[t("div",tt,[t("div",et,[t("nav",st,[t("ol",ot,[t("li",it,[l(p,{to:"/"},{default:h(()=>[m("首頁")]),_:1})]),t("li",nt,[l(p,{to:"/products"},{default:h(()=>[m("全部商品")]),_:1})]),t("li",rt,i(e.product.title),1)])]),t("div",ct,[t("div",dt,[t("div",at,[t("div",lt,[t("img",{src:e.product.imageUrl,alt:"圖片"},null,8,ut)])])]),t("div",pt,[t("span",_t,i(e.product.category),1),t("h2",mt,i(e.product.title),1),t("p",ht,i(e.product.description),1),t("div",bt,[t("p",gt,[t("del",null,"NT$ "+i(e.product.origin_price),1)]),t("p",ft," NT $"+i(e.product.price)+" / "+i(e.product.unit),1)]),t("div",vt,[t("div",yt,[t("div",wt,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:o[0]||(o[0]=_=>c.updateQty("decrement"))},"-"),D(t("input",{type:"number",class:"form-control rounded-0",readonly:"","onUpdate:modelValue":o[1]||(o[1]=_=>e.qty=_)},null,512),[[T,e.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:o[2]||(o[2]=_=>c.updateQty("increment",e.product.num))},"+")])]),t("button",{type:"button",class:"btn btn-primary w-50",onClick:o[3]||(o[3]=L(_=>s.addCart(e.product.id,e.qty),["prevent"])),disabled:e.product.id===s.status.loadCart},[e.product.id===s.status.loadCart?(u(),V(n,{key:0,icon:["fas","spinner"],"spin-pulse":""})):q("",!0),m(" 加到購物車 ")],8,Pt)])])]),xt,kt,l(y,{product:e.product,onUpdate:c.getDetailProduct},null,8,["product","onUpdate"])])])])],64)}const qt=x(Y,[["render",Vt]]);export{qt as default};
