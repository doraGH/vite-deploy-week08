import{_ as k,m as f,e as m,f as i,o as a,c as r,g as n,a as e,n as v,h as g,F as l,r as h,d as u,t as d,w as $,l as L,i as x,p as S,q as V}from"./index-c7Z2GH4O.js";import{p as y}from"./productStore-qIngtcDd.js";import{c as C}from"./cartStore-xsCdpEFa.js";import{P as A}from"./PaginationComponent-88R9C7L7.js";import"./sweetalert2.all-AULtL-nT.js";const I={data(){return{categories:["冰品","甜點","飲品"]}},components:{PaginationComponent:A},computed:{...f(y,["products","pagination","loadItem","isLoading"]),...f(C,["cartList","status"])},methods:{...m(y,["getProducts","getProductItem"]),...m(C,["addCart","getCarts"]),fetchProducts(){this.getProducts(this.$route.query.category)},changePage(s){const o=this.$route.query.category||"";this.getProducts(o,s),o===""?this.$router.push("/products"):this.$router.push(`/products?category=${o}`)},isActive(s){return this.$route.fullPath===s},handleCategoryChange(s){const o=s.target.value;o==="all"?this.$router.push("/products"):this.$router.push(`/products?category=${o}`)}},watch:{"$route.query":{handler(){this.fetchProducts()},deep:!0}},mounted(){this.fetchProducts(),this.getCarts()}},q=s=>(S("data-v-c639d12f"),s=s(),V(),s),B={class:"container g-wrapper"},N=q(()=>e("h2",{class:"text-center"},"美味菜單",-1)),D={class:"d-none d-md-block"},E={class:"d-flex justify-content-center my-3 product-menu"},F={class:"d-md-none"},R=["selected"],j=["value","selected"],z={class:"mt-4"},M={class:"row row-cols-2 row-cols-md-3 row-cols-lg-5 my-4 g-4"},T={class:"procard"},U={class:"procard-image"},G=["src"],H={class:"procard-text"},J={class:"tibox"},K={class:"card-text"},O={class:"btn-group btn-group-sm d-flex"},Q=["disabled","onClick"];function W(s,o,X,Y,_,c){const P=i("VueLoading"),p=i("RouterLink"),w=i("font-awesome-icon"),b=i("PaginationComponent");return a(),r(l,null,[n(P,{active:s.isLoading},null,8,["active"]),e("div",B,[N,e("div",D,[e("ul",E,[e("li",{class:v(["rounded-pill",{active:c.isActive("/products")}])},[n(p,{to:"/products"},{default:g(()=>[u("全部")]),_:1})],2),(a(!0),r(l,null,h(_.categories,t=>(a(),r("li",{class:v(["rounded-pill",{active:c.isActive(`/products?category=${t}`)}]),key:t},[n(p,{to:`/products?category=${t}`},{default:g(()=>[u(d(t),1)]),_:2},1032,["to"])],2))),128))])]),e("div",F,[e("select",{class:"form-select","aria-label":"Default select example",onChange:o[0]||(o[0]=(...t)=>c.handleCategoryChange&&c.handleCategoryChange(...t))},[e("option",{value:"all",selected:c.isActive("/products")},"全部",8,R),(a(!0),r(l,null,h(_.categories,t=>(a(),r("option",{key:t,value:t,selected:c.isActive(`/products?category=${t}`)},d(t),9,j))),128))],32)]),e("div",z,[e("div",M,[(a(!0),r(l,null,h(s.products,t=>(a(),r("div",{class:"col",key:t.id},[e("div",T,[e("div",U,[n(p,{to:`/product-view/${t.id}`},{default:g(()=>[e("img",{src:t.imageUrl,alt:"圖片"},null,8,G)]),_:2},1032,["to"])]),e("div",H,[e("div",J,d(t.title),1),e("p",K,[e("del",null,"原價 "+d(t.origin_price)+" 元",1),u(" / "),e("span",null,"特價 "+d(t.price)+" 元",1)]),e("div",O,[e("button",{type:"button",class:"btn btn-outline-danger","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample",disabled:t.id===s.status.loadCart,onClick:$(Z=>s.addCart(t.id),["prevent"])},[t.id===s.status.loadCart?(a(),L(w,{key:0,icon:["fas","spinner"],"spin-pulse":""})):x("",!0),u(" 加到購物車 ")],8,Q)])])])]))),128))])]),n(b,{pages:s.pagination,onChangePage:c.changePage},null,8,["pages","onChangePage"])])],64)}const ct=k(I,[["render",W],["__scopeId","data-v-c639d12f"]]);export{ct as default};
