import{m as b,e as P,_ as x,f as a,o as u,c as g,a as t,g as l,h,F as k,r as C,l as V,w as L,t as i,d as m,k as S,b as D,v as T,i as E}from"./index-c7Z2GH4O.js";import{c as w}from"./cartStore-xsCdpEFa.js";import{p as v}from"./productStore-qIngtcDd.js";import{S as R,a as q,A as $,N as A,P as B}from"./pagination-q4AW_QmU.js";import"./sweetalert2.all-AULtL-nT.js";const N={components:{Swiper:R,SwiperSlide:q},data(){return{related:[],modules:[$,A,B]}},props:{product:{type:Object}},computed:{...b(v,["allProducts"]),filteredItems(){return this.allProducts.filter(s=>s.id!==this.product.id&&s.category===this.product.category)}},methods:{...P(v,["getAllProducts"]),getDetail(s){this.$emit("update",s),window.scrollTo({top:0,behavior:"smooth"})}},mounted(){this.getAllProducts()}},U={class:"iproducts"},I={class:"container"},Q={class:"swiper-wrapper"},O=["onClick"],M={class:"item_cont-image"},j=["src"],F={class:"item_cont-text"},H={class:"tibox"},G=t("div",{class:"custom-pagination"},null,-1);function z(s,o,r,d,e,c){const f=a("swiper-slide"),p=a("swiper");return u(),g("div",U,[t("div",I,[t("div",Q,[l(p,{ref:"relateSwiper",modules:e.modules,slidesPerGroup:1,slidesPerView:2,spaceBetween:20,loop:!1,autoplay:{delay:6e3,disableOnInteraction:!1},pagination:{el:".custom-pagination",clickable:!0},breakpoints:{768:{slidesPerView:3,spaceBetween:30},992:{slidesPerView:4,spaceBetween:50}}},{default:h(()=>[(u(!0),g(k,null,C(c.filteredItems,n=>(u(),V(f,{key:n.id},{default:h(()=>[t("a",{href:"#",onClick:L(y=>c.getDetail(n.id),["prevent"]),class:"item_cont"},[t("div",M,[t("img",{src:n.imageUrl,alt:"圖片"},null,8,j)]),t("div",F,[t("div",H,i(n.title),1),m(" $"+i(n.price),1)])],8,O)]),_:2},1024))),128))]),_:1},8,["modules","pagination"])]),G])])}const J=x(N,[["render",z]]);var K={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"dorayu",BASE_URL:"/vite-deploy-week08/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:W,VITE_PATH:X}=K,Y={data(){return{product:{},qty:1,isLoading:!1}},components:{RelateProducts:J},computed:{...b(v,["products"]),...b(w,["cartList","status"])},methods:{...P(w,["addCart"]),getDetailProduct(s){const o=`${W}/api/${X}/product/${s}`;this.isLoading=!0,this.axios.get(o).then(r=>{const{product:d}=r.data;this.isLoading=!1,this.product=d}).catch(r=>{S.error(r.response.data.message)}).finally(()=>{this.isLoading=!1})},updateQty(s,o=1){const d=o;s==="decrement"?this.qty>1&&(this.qty-=1):s==="increment"&&this.qty<d&&(this.qty+=1)}},created(){const{id:s}=this.$route.params;this.getDetailProduct(s)}},Z={class:"container g-wrapper"},tt={class:"row justify-content-center"},et={class:"col-lg-10"},st={"aria-label":"breadcrumb"},ot={class:"breadcrumb bg-white"},it={class:"breadcrumb-item"},nt={class:"breadcrumb-item"},rt={class:"breadcrumb-item active text-brown","aria-current":"page"},ct={class:"row my-5"},at={class:"col-md-5"},dt={class:"procard__detail"},lt={class:"procard__detail-image"},ut=["src"],pt={class:"col-md-6 offset-md-1"},_t={class:"badge rounded-pill bg-primary mb-3"},mt={class:"font-weight-bold text-brown"},ht={class:"lh-base"},ft={class:"d-flex flex-column align-items-end mb-4"},bt={class:"mb-0 text-muted text-right"},gt={class:"mb-0 h5 font-weight-bold text-right"},vt={class:"d-flex"},yt={class:"w-50 me-3"},wt={class:"btn-group border qty-counter"},Pt=["disabled"],xt=t("hr",null,null,-1),kt=t("h5",{class:"font-weight-bold mt-4"},"相關商品",-1);function Vt(s,o,r,d,e,c){const f=a("VueLoading"),p=a("RouterLink"),n=a("font-awesome-icon"),y=a("RelateProducts");return u(),g(k,null,[l(f,{active:e.isLoading},null,8,["active"]),t("div",Z,[t("div",tt,[t("div",et,[t("nav",st,[t("ol",ot,[t("li",it,[l(p,{to:"/"},{default:h(()=>[m("首頁")]),_:1})]),t("li",nt,[l(p,{to:"/products"},{default:h(()=>[m("全部商品")]),_:1})]),t("li",rt,i(e.product.title),1)])]),t("div",ct,[t("div",at,[t("div",dt,[t("div",lt,[t("img",{src:e.product.imageUrl,alt:"圖片"},null,8,ut)])])]),t("div",pt,[t("span",_t,i(e.product.category),1),t("h2",mt,i(e.product.title),1),t("p",ht,i(e.product.description),1),t("div",ft,[t("p",bt,[t("del",null,"NT$ "+i(e.product.origin_price),1)]),t("p",gt," NT $"+i(e.product.price)+" / "+i(e.product.unit),1)]),t("div",vt,[t("div",yt,[t("div",wt,[t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:o[0]||(o[0]=_=>c.updateQty("decrement"))},"-"),D(t("input",{type:"number",class:"form-control rounded-0",readonly:"","onUpdate:modelValue":o[1]||(o[1]=_=>e.qty=_)},null,512),[[T,e.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:o[2]||(o[2]=_=>c.updateQty("increment",20))},"+")])]),t("button",{type:"button",class:"btn btn-primary w-50","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasExample","aria-controls":"offcanvasExample",onClick:o[3]||(o[3]=L(_=>s.addCart(e.product.id,e.qty),["prevent"])),disabled:e.product.id===s.status.loadCart},[e.product.id===s.status.loadCart?(u(),V(n,{key:0,icon:["fas","spinner"],"spin-pulse":""})):E("",!0),m(" 加到購物車 ")],8,Pt)])])]),xt,kt,l(y,{product:e.product,onUpdate:c.getDetailProduct},null,8,["product","onUpdate"])])])])],64)}const Et=x(Y,[["render",Vt]]);export{Et as default};
